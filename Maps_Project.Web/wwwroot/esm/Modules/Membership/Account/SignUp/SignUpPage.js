import{b as m,c as h,d as i,e as v}from"../../../../_chunks/chunk-O5HBSBRV.js";import{a as n}from"../../../../_chunks/chunk-U5SKCCFF.js";import{a as d,b as u,c as s,g as p,k as c}from"../../../../_chunks/chunk-LRH74UCM.js";var y=p(c(),1),t=p(c(),1);function w(l){new a($("#SignUpPanel"),l)}s(w,"pageInit");var r=n.Forms.Membership.SignUp,a=class extends y.PropertyPanel{constructor(e,o){super(e,o);this.form=new m(this.idPrefix),this.form.Email.element.attr("autocomplete","off"),this.form.Password.element.attr("autocomplete","new-password"),this.form.ConfirmEmail.addValidationRule(this.uniqueName,P=>{if(this.form.ConfirmEmail.value!==this.form.Email.value)return n.Validation.EmailConfirm}),this.form.ConfirmPassword.addValidationRule(this.uniqueName,P=>{if(this.form.ConfirmPassword.value!==this.form.Password.value)return n.Validation.PasswordConfirmMismatch}),this.options.ExternalProviderToken&&(this.form.DisplayName.value=this.options.DisplayName,this.form.Email.value=this.options.Email,this.form.ConfirmEmail.value=this.options.Email,this.byId("FormInfo").text(r.ConfirmDetails))}getFormKey(){return m.formKey}getPropertyItems(){var e=super.getPropertyItems();if(this.options.ExternalProviderToken){var e=(0,t.deepClone)(e);for(var o of e.filter(f=>f.name=="Password"||f.name=="ConfirmPassword"))o.visible=!1}return e}submitClick(){if(this.validateForm()){var e=this.propertyGrid.save();delete e.ConfirmEmail,delete e.ConfirmPassword,(0,t.serviceCall)({url:(0,t.resolveUrl)("~/Account/SignUp"),request:u(d({},e),{ExternalProviderToken:this.options.ExternalProviderToken}),onSuccess:o=>{if(o.DemoActivationLink){(0,t.informationDialog)(`You would normally receive an e-mail with instructions to active your account now.

But as this is a DEMO, you'll be redirected to the activation page automatically. `,()=>{window.location.href=(0,t.resolveUrl)(o.DemoActivationLink)});return}o.NeedsActivation?(0,t.informationDialog)(r.Success,()=>{window.location.href=(0,t.resolveUrl)("~/")}):window.location.href=(0,t.resolveUrl)("~/")}})}}renderContents(){let e=this.useIdPrefix();this.element.empty().append(i(h,{children:[i(v,{}),i("div",{class:"s-Panel p-4",children:[i("h5",{class:"text-center my-4",children:r.FormTitle}),i("p",{id:e.FormInfo,class:"text-center",children:r.FormInfo}),i("form",{id:e.Form,action:"",autoComplete:"off",children:[i("input",{autoComplete:"false",name:"hidden",type:"text",style:"display:none;"}),i("div",{id:e.PropertyGrid}),i("div",{class:"px-field",children:i("button",{id:e.SubmitButton,type:"submit",class:"btn btn-primary my-4 w-100",onClick:o=>{o.preventDefault(),this.submitClick()},children:r.SubmitButton})})]})]})]}))}};s(a,"SignUpPanel");export{w as default};
//# sourceMappingURL=SignUpPage.js.map
